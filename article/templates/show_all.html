{% extends 'base.html' %}

<!--显示所有动态页面-->
{% block content %}
<h2>动态圈</h2>

<hr>
{% for art in articles %}
<div class="alert alert-info" role="alert">
    <strong><a href="/user/other_info?uid={{ art.author.id }}">{{ art.author.username }}</a>:</strong>
    <hr>
    &nbsp;&nbsp;&nbsp;&nbsp;{{ art.content | replace('\n','<br>') | safe }}
    <hr>
    <label style="float: right" class="text-secondary">{{ art.updated }}</label>

    <!--  判断是否登录  -->
    {% if session.uid %}
    <a class="text-secondary" href="/article/show?art_id={{ art.id }}">评论&nbsp;&nbsp;&nbsp;&nbsp;</a>
    {% else %}
    <a class="text-secondary" href="/user/login">评论&nbsp;&nbsp;&nbsp;&nbsp;</a>
    {% endif  %}

    <!-- 点赞数量   -->
    <span class="text-secondary" >{{ art.n_thumb }}  赞</span>



</div>

{% endfor %}
<nav aria-label="Page navigation">
    <ul class="pagination">
        <!--  判断是否是第一页      -->
        {% if page == 1 %}
         <li class="page-item"><a class="page-link" > 上一页  </a></li>
        {% else %}
         <li class="page-item"><a class="page-link" href="/article/show_all?page={{ page - 1 }}"> 上一页  </a></li>
        {% endif %}

        {% for num in page_num %}
            {% if num == page %}
                <li class="page-item"><a class="page-link text-secondary">{{ num }}</a></li>
            {% else %}
                <li class="page-item"><a class="page-link" href="/article/show_all?page={{ num }}">{{ num }}</a></li>
            {% endif %}
        {% endfor %}

        <!--    判断是否是最后一页    -->
        {% if page == max_page  %}
        <li class="page-item"><a class="page-link" > 下一页  </a></li>
        {% else %}
        <li class="page-item"><a class="page-link" href="/article/show_all?page={{ page + 1 }}"> 下一页  </a></li>
        {% endif %}
    </ul>
</nav>
{% endblock  %}